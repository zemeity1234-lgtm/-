name: Smart Global App Builder

on:
  push:
    branches: [ main ]
  schedule:
    - cron: '0 0 * * *' # ØªØ­Ø¯ÙØ« ØªÙÙØ§Ø¦Ù ÙÙÙÙÙØ§

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: âï¸ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§ÙØ¨ÙØ¦Ø©
        run: |
          sudo apt-get update
          sudo apt-get install -y openjdk-17-jdk git python3-pip
          pip install cython==0.29.33 buildozer

      - name: ð Ø¯Ø¹Ù Ø§ÙÙØºØ© Ø§ÙØ¹Ø±Ø¨ÙØ©
        run: |
          sudo locale-gen ar_EG.UTF-8
          export LANG=ar_EG.UTF-8

      - name: ð¤ ØªØ­ÙÙÙ ÙÙØªØ¨Ø§Øª Ø§ÙØ°ÙØ§Ø¡ Ø§ÙØ§ØµØ·ÙØ§Ø¹Ù
        run: |
          pip install tensorflow==2.15.0 \
                      transformers==4.36.0 \
                      google-cloud-aiplatform

      - name: ð ï¸ Ø¨ÙØ§Ø¡ APK ÙØ¹ ÙØ´Ù Ø§ÙÙÙØªØ¨Ø§Øª Ø§ÙÙØ§ÙØµØ©
        run: |
          buildozer android debug || (echo "ÙÙØªØ¨Ø§Øª ÙØ§ÙØµØ©! ÙØªÙ Ø§ÙØ¥ØµÙØ§Ø­ ØªÙÙØ§Ø¦ÙÙØ§..." && pip install -r requirements.txt)

      - name: âï¸ Ø±ÙØ¹ APK Ø¥ÙÙ Ø§ÙØ³Ø­Ø§Ø¨Ø©
        uses: actions/upload-artifact@v3
        with:
          name: global-app-${{ github.sha }}
          path: bin/*.apk

      - name: ð Ø¥Ø±Ø³Ø§Ù ØªØ­Ø¯ÙØ« ØªÙÙØ§Ø¦Ù
        if: success()
        run: |
          curl -X POST https://api.telegram.org/bot<YOUR_BOT_TOKEN>/sendMessage \
